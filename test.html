<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload and Display Multiple Videos with Thumbnails</title>
</head>
<body>
    <h1>Upload and Display MP4 Videos with Thumbnails</h1>
    <input type="file" id="fileInput" accept="video/mp4">
    <br><br>
    <input type="file" id="thumbnailInput" accept="image/*">
    <br><br>
    <input type="text" id="titleInput" placeholder="Title">
    <br><br>
    <textarea id="descriptionInput" placeholder="Description"></textarea>
    <br><br>
    <button onclick="addVideo()">Upload and Add Video</button>
    <br><br>
    <div id="videoContainer"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadVideos();
        });

        function addVideo() {
            const fileInput = document.getElementById('fileInput');
            const thumbnailInput = document.getElementById('thumbnailInput');
            const titleInput = document.getElementById('titleInput');
            const descriptionInput = document.getElementById('descriptionInput');
            const videoContainer = document.getElementById('videoContainer');

            if (fileInput.files.length === 0 || thumbnailInput.files.length === 0) {
                alert('Please select a video file and a thumbnail image.');
                return;
            }

            const videoFile = fileInput.files[0];
            const thumbnailFile = thumbnailInput.files[0];
            const videoURL = URL.createObjectURL(videoFile);
            const thumbnailURL = URL.createObjectURL(thumbnailFile);
            const title = titleInput.value;
            const description = descriptionInput.value;

            if (!title || !description) {
                alert('Please provide a title and description.');
                return;
            }

            const videoPost = {
                id: new Date().getTime(),
                title: title,
                description: description,
                videoURL: videoURL,
                thumbnailURL: thumbnailURL
            };

            saveVideo(videoPost);
            displayVideo(videoPost, videoContainer);
            clearInputs();
        }

        function saveVideo(videoPost) {
            const videos = JSON.parse(localStorage.getItem('videos')) || [];
            videos.unshift(videoPost);
            localStorage.setItem('videos', JSON.stringify(videos));
        }

        function loadVideos() {
            const videos = JSON.parse(localStorage.getItem('videos')) || [];
            const videoContainer = document.getElementById('videoContainer');
            videos.forEach(videoPost => displayVideo(videoPost, videoContainer));
        }

        function displayVideo(videoPost, container) {
            const postContainer = document.createElement('div');

            const titleElement = document.createElement('h3');
            titleElement.textContent = videoPost.title;

            const thumbnailElement = document.createElement('img');
            thumbnailElement.src = videoPost.thumbnailURL;
            thumbnailElement.width = 640;
            thumbnailElement.height = 360;
            thumbnailElement.style.cursor = 'pointer';
            thumbnailElement.onclick = function() {
                thumbnailElement.style.display = 'none';
                videoPlayer.style.display = 'block';
                videoPlayer.play();
            };

            const descriptionElement = document.createElement('p');
            descriptionElement.textContent = videoPost.description;

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.onclick = function() {
                deleteVideo(videoPost.id);
                container.removeChild(postContainer);
            };

            const videoPlayer = document.createElement('video');
            videoPlayer.width = 640;
            videoPlayer.height = 360;
            videoPlayer.controls = true;
            videoPlayer.src = videoPost.videoURL;
            videoPlayer.style.display = 'none';

            postContainer.appendChild(titleElement);
            postContainer.appendChild(thumbnailElement);
            postContainer.appendChild(descriptionElement);
            postContainer.appendChild(videoPlayer);
            postContainer.appendChild(deleteButton);

            container.insertBefore(postContainer, container.firstChild);
        }

        function deleteVideo(id) {
            const videos = JSON.parse(localStorage.getItem('videos')) || [];
            const updatedVideos = videos.filter(video => video.id !== id);
            localStorage.setItem('videos', JSON.stringify(updatedVideos));
        }

        function clearInputs() {
            document.getElementById('fileInput').value = '';
            document.getElementById('thumbnailInput').value = '';
            document.getElementById('titleInput').value = '';
            document.getElementById('descriptionInput').value = '';
        }
    </script>
</body>
</html>
